<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Relaxing Bank Tycoon</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
body{margin:0;font-family:'Poppins',sans-serif;background:#f9f1e0;color:#4a3f35}
.topbar{background:#fff7e6;padding:10px;display:flex;justify-content:space-around;flex-wrap:wrap;box-shadow:0 2px 6px rgba(0,0,0,0.1)}
.stat{margin:5px 10px;font-weight:600}
.container{display:flex;flex-wrap:wrap;padding:10px}
.visual{flex:1 1 250px;display:flex;align-items:center;justify-content:center;padding:20px}
.bank{width:180px;height:140px;background:#d4af37;border-radius:20px;position:relative;box-shadow:0 8px 20px rgba(0,0,0,0.15);transition:.5s}
.window{width:30px;height:30px;background:#fff7e6;border-radius:6px;position:absolute;top:20px}
.w1{left:20px}.w2{right:20px}
.door{width:40px;height:60px;background:#b7d7b0;border-radius:8px;position:absolute;bottom:0;left:50%;transform:translateX(-50%)}
.panels{flex:2 1 400px;padding:10px}
.panel{background:#fff7e6;border-radius:16px;padding:12px;margin-bottom:10px;box-shadow:0 3px 8px rgba(0,0,0,0.08)}
button{background:#d4af37;border:none;color:#fff;padding:6px 10px;border-radius:8px;margin:3px;cursor:pointer}
button:hover{opacity:.85}
select{padding:5px;border-radius:6px}
.small{font-size:.85em;color:#6a5a4a}
</style>
</head>
<body>

<audio id="music" loop></audio>

<div class="topbar">
<div class="stat">üí∞ <span data-i="cash"></span>: $<span id="cash">0</span></div>
<div class="stat">üè¶ <span data-i="deposits"></span>: $<span id="deposits">0</span></div>
<div class="stat">üìÑ <span data-i="loans"></span>: $<span id="loans">0</span></div>
<div class="stat">ü§ù <span data-i="trust"></span>: <span id="trust">0</span>%</div>
<div class="stat">‚≠ê <span data-i="prestige"></span>: <span id="prestige">0</span></div>
</div>

<div class="container">
<div class="visual">
<div class="bank" id="bank">
<div class="window w1"></div>
<div class="window w2"></div>
<div class="door"></div>
</div>
</div>

<div class="panels">

<div class="panel">
<h3 data-i="settings"></h3>
<label data-i="language"></label>
<select id="langSelect">
<option value="en">English</option>
<option value="ru">–†—É—Å—Å–∫–∏–π</option>
</select>
<br><br>
<label data-i="music"></label>
<select id="musicSelect">
<option value="off">Off</option>
<option value="lofi">Lo-Fi</option>
<option value="acoustic">Acoustic</option>
</select>
</div>

<div class="panel">
<h3 data-i="rates"></h3>
<span data-i="depositRate"></span>
<input type="range" id="depositRate" min="1" max="10" step="0.1">
<span id="depositRateVal"></span>%<br>
<span data-i="loanRate"></span>
<input type="range" id="loanRate" min="3" max="15" step="0.1">
<span id="loanRateVal"></span>%<br>
<span data-i="risk"></span>
<input type="range" id="risk" min="0" max="100">
<span id="riskVal"></span>%
</div>

<div class="panel">
<h3 data-i="actions"></h3>
<button onclick="manualDeposit()" data-i="attract"></button>
<button onclick="manualLoan()" data-i="approve"></button>
</div>

<div class="panel">
<h3 data-i="staff"></h3>
<div id="staffPanel"></div>
</div>

<div class="panel">
<h3 data-i="branches"></h3>
<button onclick="buyBranch()"><span data-i="openBranch"></span> ($<span id="branchCost">1000</span>)</button>
<span data-i="owned"></span>: <span id="branchCount">0</span>
</div>

<div class="panel">
<h3 data-i="prestigeTitle"></h3>
<button onclick="prestige()" data-i="prestigeBtn"></button>
<div class="small" data-i="prestigeInfo"></div>
</div>

</div>
</div>

<script>
// ---------- TRANSLATIONS ----------
const i18n={
 en:{
  cash:"Cash",deposits:"Deposits",loans:"Loans",trust:"Trust",prestige:"Prestige",
  settings:"Settings",language:"Language:",music:"Music:",
  rates:"Rates",depositRate:"Deposit Rate",loanRate:"Loan Rate",risk:"Risk",
  actions:"Actions",attract:"Attract Depositor",approve:"Approve Loan",
  staff:"Staff",branches:"Branches",openBranch:"Open Branch",
  owned:"Owned",prestigeTitle:"Prestige",prestigeBtn:"Rebrand Bank",
  prestigeInfo:"Each token gives +2% income"
 },
 ru:{
  cash:"–ù–∞–ª–∏—á–Ω—ã–µ",deposits:"–î–µ–ø–æ–∑–∏—Ç—ã",loans:"–ö—Ä–µ–¥–∏—Ç—ã",trust:"–î–æ–≤–µ—Ä–∏–µ",prestige:"–ü—Ä–µ—Å—Ç–∏–∂",
  settings:"–ù–∞—Å—Ç—Ä–æ–π–∫–∏",language:"–Ø–∑—ã–∫:",music:"–ú—É–∑—ã–∫–∞:",
  rates:"–°—Ç–∞–≤–∫–∏",depositRate:"–°—Ç–∞–≤–∫–∞ –¥–µ–ø–æ–∑–∏—Ç–∞",loanRate:"–°—Ç–∞–≤–∫–∞ –∫—Ä–µ–¥–∏—Ç–∞",risk:"–†–∏—Å–∫",
  actions:"–î–µ–π—Å—Ç–≤–∏—è",attract:"–ü—Ä–∏–≤–ª–µ—á—å –≤–∫–ª–∞–¥—á–∏–∫–∞",approve:"–í—ã–¥–∞—Ç—å –∫—Ä–µ–¥–∏—Ç",
  staff:"–ü–µ—Ä—Å–æ–Ω–∞–ª",branches:"–§–∏–ª–∏–∞–ª—ã",openBranch:"–û—Ç–∫—Ä—ã—Ç—å —Ñ–∏–ª–∏–∞–ª",
  owned:"–í—Å–µ–≥–æ",prestigeTitle:"–ü—Ä–µ—Å—Ç–∏–∂",prestigeBtn:"–†–µ–±—Ä–µ–Ω–¥–∏–Ω–≥",
  prestigeInfo:"–ö–∞–∂–¥—ã–π —Ç–æ–∫–µ–Ω –¥–∞—ë—Ç +2% –¥–æ—Ö–æ–¥–∞"
 }
};

let settings={lang:"en",music:"off"};

// ---------- GAME STATE ----------
let game={cash:100,deposits:0,loans:0,trust:100,risk:20,depositRate:3,loanRate:7,prestigeTokens:0,
 staff:{teller:{count:0,cost:50,gen:0.5},loan:{count:0,cost:75,gen:0.3}},
 branches:0,lastSaved:Date.now()};

// ---------- LANGUAGE ----------
function applyLang(){
 document.querySelectorAll("[data-i]").forEach(el=>{
  el.textContent=i18n[settings.lang][el.dataset.i];
 });
}

// ---------- MUSIC ----------
const musicEl=document.getElementById("music");
function updateMusic(){
 if(settings.music==="off"){musicEl.pause();return;}
 musicEl.src=settings.music==="lofi"
  ?"https://cdn.pixabay.com/download/audio/2022/03/15/audio_5b0d6c1d8a.mp3"
  :"https://cdn.pixabay.com/download/audio/2022/03/10/audio_c8a1a7.mp3";
 musicEl.volume=0.3;
 musicEl.play().catch(()=>{});
}

// ---------- HELPERS ----------
function f(n){return n.toFixed(2)}
function branchMult(){return 1+game.branches*0.25}

// ---------- UI ----------
function updateUI(){
 cash.textContent=f(game.cash);
 deposits.textContent=f(game.deposits);
 loans.textContent=f(game.loans);
 trust.textContent=f(game.trust);
 prestige.textContent=game.prestigeTokens;
 depositRateVal.textContent=game.depositRate;
 loanRateVal.textContent=game.loanRate;
 riskVal.textContent=game.risk;
 branchCount.textContent=game.branches;
}

// ---------- GAME LOOP ----------
function tick(sec=1){
 game.deposits+=game.staff.teller.count*0.5*sec;
 game.loans+=game.staff.loan.count*0.3*sec;

 let profit=(game.loans*game.loanRate/100 - game.deposits*game.depositRate/100)/60;
 game.cash+=profit*(1+game.prestigeTokens*0.02)*branchMult()*sec;

 updateUI();
}

// ---------- ACTIONS ----------
function manualDeposit(){if(game.cash>=1){game.cash-=1;game.deposits+=5}}
function manualLoan(){game.loans+=5}
function hire(type){
 let s=game.staff[type];
 if(game.cash>=s.cost){game.cash-=s.cost;s.count++;s.cost*=1.15;renderStaff();}
}
function renderStaff(){
 staffPanel.innerHTML="";
 for(let k in game.staff){
  let s=game.staff[k];
  staffPanel.innerHTML+=`${k} (${s.count}) <button onclick="hire('${k}')">$${Math.round(s.cost)}</button><br>`;
 }
}
function buyBranch(){
 let cost=1000*Math.pow(1.5,game.branches);
 if(game.cash>=cost){game.cash-=cost;game.branches++}
}
function prestige(){
 if(confirm("Prestige?")){
  game={cash:100,deposits:0,loans:0,trust:100,risk:20,depositRate:3,loanRate:7,
  prestigeTokens:game.prestigeTokens+1,staff:{teller:{count:0,cost:50},loan:{count:0,cost:75}},
  branches:0,lastSaved:Date.now()}
 }
}

// ---------- SAVE ----------
function save(){
 localStorage.setItem("bankGame",JSON.stringify(game));
 localStorage.setItem("bankSettings",JSON.stringify(settings));
}
function load(){
 let g=localStorage.getItem("bankGame");
 if(g) game=JSON.parse(g);
 let s=localStorage.getItem("bankSettings");
 if(s) settings=JSON.parse(s);
}

// ---------- EVENTS ----------
langSelect.onchange=e=>{settings.lang=e.target.value;applyLang();save();}
musicSelect.onchange=e=>{settings.music=e.target.value;updateMusic();save();}
depositRate.oninput=e=>game.depositRate=parseFloat(e.target.value);
loanRate.oninput=e=>game.loanRate=parseFloat(e.target.value);
risk.oninput=e=>game.risk=parseFloat(e.target.value);

// ---------- INIT ----------
load();
langSelect.value=settings.lang;
musicSelect.value=settings.music;
applyLang();
updateMusic();
renderStaff();
updateUI();
setInterval(()=>{tick(1);save()},1000);
</script>
</body>
</html>
